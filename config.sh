#!/usr/bin/env bash

###############################################################################
#                             配置文件 (config.sh)                             #
###############################################################################

# —— 模型列表 —— 
MODELS=(
  "bert-base"
  "bert-large"
  "roberta-base"
  "roberta-large"
  "sbert"
  "consert-base"
  "consert-large"
)

# —— 公共超参数 —— 
DEVICE="cuda:0"            # GPU 设备
BATCH_SIZE=64              # 批大小
LR=1e-3                    # 学习率
MAX_SEQ_LEN=96             # 最大序列长度
MAX_EPOCH=100              # 最大训练轮数
EVAL_EPOCHS=1              # 每多少轮评估一次
EARLY_STOP=20              # 验证不升的早停轮数
POOL_TYPE="none"           # pooling 策略
N_CLASS=2                  # 分类数
LOG="no"                   # 是否记录训练日志 (yes/no)

# —— 多轮训练 & 随机种子 —— 
REPEAT=5                   # 重复训练次数
SEEDS=(42 43 44 45 46)     # 随机种子列表

# —— 训练模式 —— 
MODE="train"               # train/test

###############################################################################
#                     【新增功能配置选项】                                     #
###############################################################################

# 1. 并行作业数（控制同一时刻启动的模型数）
#    例如 PARALLEL=2，则每两种模型为一组并行调度
PARALLEL=2

# 2. 是否仅保存最优模型（val loss 最低时才保存）
SAVE_BEST_ONLY="yes"       # yes/no

# 3. 日志级别（可选 DEBUG/INFO/WARNING/ERROR）
LOG_LEVEL="INFO"

# 4. 模型检查点频率（训练中每隔多少轮保存一次检查点）
CHECKPOINT_FREQ=10         # 每 10 轮保存一次

# 5. 资源限制（每个作业最大 GPU 显存占用比例）
MAX_MEM_PERCENT=90         # 百分比

# 6. 任务调度开始时间（可设在未来某时刻启动批量任务）
#    格式 "HH:MM" （24h制），如 "02:00" 表示凌晨两点
SCHEDULE_TIME=""

# 7. Dry-run 模式（仅打印即将执行的命令，但不真正运行）
DRY_RUN="no"               # yes/no

###############################################################################
#                              结束                                          #
###############################################################################
